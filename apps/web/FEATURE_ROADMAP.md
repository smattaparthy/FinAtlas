# FinAtlas Feature Roadmap

Features documented for future implementation sessions.

---

## Milestone Timeline & Life Event Modeling

### Overview
Visual timeline showing projected milestones (retirement, mortgage payoff, goal completion) overlaid on the projection chart. Life event templates that auto-create income/expense changes.

### Key Components
- **Timeline Overlay**: Horizontal timeline component that renders milestone markers on top of the existing NetWorthChart or a dedicated timeline view. Each marker shows the event name, projected date, and financial impact.
- **Life Event Templates**: Pre-built templates for common life events (having a baby, buying a house, career change, marriage, etc.). Each template bundles a set of income/expense/loan modifications that are applied to the scenario.
- **Data Model**: New `LifeEvent` Prisma model with fields: `id`, `scenarioId`, `type` (enum), `name`, `targetDate`, `modifications` (JSON blob describing income/expense/loan changes), `isActive`.
- **UI**: Timeline component below the projection chart, event creation modal with template selector and customization form.

### Implementation Notes
- Integrate with existing `ProjectionChart` by adding optional milestone markers as SVG elements
- Life event modifications should create actual Income/Expense/Loan records tagged with the event ID for easy bulk editing/removal
- Consider undo: removing a life event should remove all associated financial records

---

## Smart What-If Templates

### Overview
Pre-built scenario templates that apply guided modifications without requiring the AI assistant. Users can instantly preview before/after impacts.

### Templates to Build
| Template | Modifications |
|----------|---------------|
| Buy a House | Add mortgage loan, property tax expense, homeowner insurance, remove rent expense, add down payment deduction |
| Have a Baby | Add childcare expense, medical expenses, adjust tax filing, reduced savings |
| Retire Early | Remove employment income at target date, add Social Security at 62/67, adjust expense profile |
| Max 401(k) | Add contribution rule at IRS max ($23,500 for 2025), adjust take-home pay |
| Career Change | Modify income amount/timing, add education expense if applicable |
| Pay Off Debt | Apply extra payments to highest-rate loans, cascade to next loan |

### Key Components
- **Template Selector**: Card-based UI showing available templates with brief descriptions and estimated impact preview
- **Guided Form**: Multi-step form for each template collecting the necessary parameters (e.g., home price, down payment percentage for "Buy a House")
- **Before/After Preview**: Side-by-side mini chart showing current projection vs. projection with template applied
- **Apply/Discard**: User can apply the template to create a new scenario or discard

### Implementation Notes
- Templates are pure frontend logic that generate the appropriate API calls to create/modify financial records
- Each template creates a new scenario (cloned from current) with the modifications applied
- Preview uses the existing `/api/projections` endpoint with a temporary in-memory scenario

---

## Export & Shareable Reports

### Overview
PDF export of the financial plan including dashboard metrics, charts, projections, and insights. Shareable links for financial advisor meetings.

### Key Components
- **PDF Generator**: Server-side PDF generation using a library like `@react-pdf/renderer` or `puppeteer` for high-fidelity chart rendering
- **Report Sections** (user-selectable):
  - Executive summary (health score, key metrics)
  - Income & expense breakdown
  - Investment portfolio overview
  - Net worth projection chart
  - Goal progress tracking
  - Scenario comparison (if multiple scenarios)
  - AI-generated insights
- **Print Layout**: CSS `@media print` styles for browser-based printing as alternative to PDF
- **Share Tokens**: Generate time-limited, read-only share URLs. New `ShareToken` Prisma model with fields: `id`, `scenarioId`, `expiresAt`, `accessCount`, `maxAccesses`
- **Shared View**: Public route `/shared/[token]` that renders a read-only dashboard with no editing capabilities

### Implementation Notes
- Chart rendering in PDF requires either SVG-to-PDF conversion or server-side browser rendering
- Share tokens should have configurable expiration (default: 7 days) and optional access limits
- Consider watermarking shared reports with "Generated by FinAtlas" branding
- Shared views must not expose any PII beyond what's in the financial data itself
